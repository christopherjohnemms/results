<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title></title>
    <link href="https://fonts.googleapis.com/css?family=Archivo+Narrow:400,500,600" rel="stylesheet">

</head>
<style>
    body{
        font-family: 'Archivo Narrow', sans-serif;

    }
    h1{
         font-family: 'Archivo Narrow', sans-serif;
    }
    p{
          font-family: 'Archivo Narrow', sans-serif;
    }

    .sb {
       position: absolute;
    top: 19px;
    right: 7px;
    width: 0;
    height: 0;
    text-indent: -9999px;
    border-bottom: 32px solid #ea4242;
    border-left: 40px solid transparent;
}

.red{
    border-bottom-color: #ea4242;
}

.green{
    border-bottom-color: #48a748 !important;
}

    .tickercontainer{
        height:150px !important;

    }

    .ticker .competitor{
        width:200px;
        background:#1a1a1a;
        height:150px;
    }
    
    .ticker {
        padding:0;
        margin:0;
        list-style: none;
        display: block;
        width:100%;
        height:200px;
    }
    
    .ticker li{
            /*height:150px;*/
        width:200px;
        line-height:20px !important;
        position: relative;
    }
    .ticker li div{
        /*height:auto;*/
    }

    .name{
            height: 50px;
    position: absolute;
    left: 62px;
    top: 9px;
    line-height: 16px;
    width: 126px;
    color: #fafafa;
    font-size: 14px;
         font-family: 'Archivo Narrow', sans-serif;
    }

    .name span{
        white-space: normal !important;
    }

    .startpos{
    position: absolute;
    bottom: 40px;
    left: 7px;
    width: 200px;
    color: #fff;
    font-size: 12px;
    text-align: center;
    background: #469aad;
     font-family: 'Archivo Narrow', sans-serif;
    }

    .interval{
        position: absolute;
    bottom: 60px;
    left: 7px;
    width: 200px;
    color: #fff;
    font-size: 12px;
    text-align: center;
    background: #1b1b1b;
              font-family: 'Archivo Narrow', sans-serif;

    }

    .finpos{
         position: absolute;
    left: 7px;
    top: 0px;
    background: #8f5ca9;
    padding: 15px 11px;
    /* width: 15px; */
    /* height: 15px; */
    display: block;
    /* max-width: 50px; */
    text-align: center;
    width: 26px;
     font-family: 'Archivo Narrow', sans-serif;

    }
    .finpos span{
        color:#fff;
        font-size:20px;
        display: block;
        
        text-align: center;
    }

    .car{
    position: absolute;
    bottom: 80px;
    left: 7px;
    width: 200px;
    color: #111;
    font-size: 12px;
    text-align: center;
    background: #fafafa;
     font-family: 'Archivo Narrow', sans-serif;
    }

    .carclass{
position: absolute;
    bottom: 20px;
    left: 7px;
    width: 200px;
    color: #fff;
    font-size: 12px;
    text-align: center;
    background: #35b8d6;
     font-family: 'Archivo Narrow', sans-serif;
    }

    .irating{
    position: absolute;
    bottom: 0px;
    left: 7px;
    width: 200px;
    color: #fff;
    font-size: 12px;
    text-align: center;
    background: #00a2c7;
     font-family: 'Archivo Narrow', sans-serif;

    }

    .race-info{
        background: #111;
    }

    .race-info p{
           margin-bottom: 5px;
    text-align: center;
    font-family: 'Archivo Narrow', sans-serif;
    font-size: 16px;
    color: #fff;
    padding: 6px;
        border-bottom: 3px solid #ea4242;
    }

    .race-info p span{
        font-family: 'Archivo Narrow', sans-serif;
        font-weight:600;
    }


    .race-info-two{
        background: #111;
    }

    .race-info-two p{
           margin-bottom: 5px;
    text-align: center;
    font-family: 'Archivo Narrow', sans-serif;
    font-size: 16px;
    color: #fff;
    padding: 6px;
        border-bottom: 3px solid #35b8d6;
    }

    .race-info-two p span{
        font-family: 'Archivo Narrow', sans-serif;
        font-weight:600;
    }


    .race-info-three{
        background: #111;
    }

    .race-info-three p{
           margin-bottom: 5px;
    text-align: center;
    font-family: 'Archivo Narrow', sans-serif;
    font-size: 16px;
    color: #fff;
    padding: 6px;
        border-bottom: 3px solid #33c521;
    }

    .race-info-three p span{
        font-family: 'Archivo Narrow', sans-serif;
        font-weight:600;
    }



    


    .audi{
            width: 28px;
            height: 10px;
            display: inline-block;
            background-image: url(img/audi.png);
            background-size: cover;
            margin-right: 5px;
    }

    .merc{
        width: 28px;
            height: 10px;
            display: inline-block;
            background-image: url(img/mercedes.png);
            background-size: cover;
            margin-right: 5px;
    }

    .bmw{
        width: 28px;
            height: 10px;
            display: inline-block;
            background-image: url(img/bmw.png);
            background-size: cover;
            margin-right: 5px;
    }

    .ferrari{
        width: 28px;
            height: 10px;
            display: inline-block;
            background-image: url(img/ferarri.png);
            background-size: cover;
            margin-right: 5px;
    }
    
     .pos-diff{
            width: 20px;
    height: 21px;
    background: transparent;
    color: #fff;
    position: absolute;
    z-index: 1000;
    top: 31px;
    right: 11px;
    font-weight:lighter;
    text-align: center;
    }


    .race-results-extra{
        width:1200px;
        margin:20px auto;
        background: #ccc;
        clear: both;
    }
    .race-results-extra .left{
        float:left;
        width:40%;
    }
    .race-results-extra .center{
        width:10%;
        float:left;
    }
    .race-results-extra .right{
        float:left;
        width:40%;
    }

    .laps-title{
            margin-bottom: 5px;
    text-align: center;
    font-family: 'Archivo Narrow', sans-serif;
    font-size: 16px;
    color: #fff;
    padding: 6px;
    border-bottom: 3px solid #ea4242;
    }

    .laps{
        width:100%;background:#111;
        padding:10px 30px;
    }
    .laps td{
        color:#fff;
    }
    .laps td:first-child{
        width:46%;
    }
    .laps tr td:last-child{
        text-align: right;
    }

    .cars-list{
        width:100%;
    }

    .cars-list .row{
        width:100%;
        clear:both;
    }

    .cars-list .row .carblock{
        width:50%;
        padding-top:25px;
        padding-bottom:25px;
        float:left;
        background:#111;
        color:#fff;
        text-align: center;
    }
    
    .cars-list .row .carblock:last-child{
    }

    .cars-list .row .carblock span{
        font-size:30px;
    }
    .cars-list .row .carblock:nth-child(2n){
                background:#222;

    } 
    .cars-list .row .carblock:nth-child(3n){
                background:#333;

    } 
    .cars-list .row .carblock:nth-child(4n){
                background:#444;

    } 
 
}

</style>
<body>
    
    <div>
        <h1>Race Results - <button id="stop-newsticker2">Stop ticker</button></h1>
        <div >
            <div class="race-info">
                
            </div>
            <ul class="ticker">
            </ul>
        </div>
    </div>
    <div class="race-results-extra">
        <div class="left">
            <div>
                <div class="race-info-two">
                
                    <p>Fastest laps</p>
                    </div>
                <table class="laps">
                    
                </table>

            </div>    
        </div>
        <div class="center">
            &nbsp;
        </div>
        <div class="right">
            <div>
                <div class="race-info-three">
                
                    <p>Most popular cars</p>
                    </div>
                    <div class="cars-list">
                        

                    </div>

            </div>  
        </div>
    </div>

<script src="jquery.js"></script>
<script src="jquery.webticker.min.js"></script>


    
    <script>
        
          
        $("#stop-newsticker2").click(function(){
        $(".ticker").webTicker('stop');
    });
        
        function loadTicker(){
                $('.ticker').webTicker({
                    height:'75px', 
                    speed:100,
                    duplicate:true, 
                    rssfrequency:0, 
                    startEmpty:true, 
                    hoverpause:true, 
                    transition: "linear"
                });
            }
        
        $(document).ready(function(){
            var race = new Array();
            var competitor = new Array('','');

            var laps = [];
            var cars_array = [];


             $.ajax({ 
                type: 'GET', 
                url: 'data/race-data.json', 
                data: { get_param: 'value' }, 
                success: function (data) {
                // console.log(data);
                i = -1;
                

                var name;
                var startpos;
                var finpos;
                var car;
                var carclass;
                var irating;
                var interval;
                var carlogo;
                var position_difference;
                var pos_indicator;
                var fastest_lap;

                var racetime = data[0]["Start Time"];
                var year     = data[0]["Season Year"];
                var sof      = data[0]["Strength of  Field"];
                var track    = data[0]["Track"];
                var series   = data[0]["Series"];

                var car_count_merc = 0;
                var car_count_bmw = 0;
                var car_count_audi = 0;
                var car_count_ferrari = 0;


                $('.race-info').append('<p>'+ track +'&nbsp;&nbsp;<span>/</span>&nbsp;&nbsp;' + series + ' <span>&nbsp;&nbsp;/&nbsp;&nbsp;</span> ' + racetime +' </p>');

                $.each(data[1], function (index, value) {
                    // console.log(data[1]);

                    i++;
                    name     = data[1][i]["Name"];
                    finpos   = data[1][i]["Fin Pos"];
                    startpos = data[1][i]["Start Pos"];
                    car      = data[1][i]["Car"];
                    carclass = data[1][i]["Car Class"];
                    irating  = data[1][i]["New iRating"];
                    interval = data[1][i]["Interval"];
                    fastest_lap = data[1][i]["Fastest Lap Time"];

                    position_difference = startpos - finpos;
                    if(position_difference < 0){
                        pos_indicator = "red";
                    }else{
                        if(position_difference == 0){
                            position_difference = position_difference;
                        }
                        else if(position_difference > 0){
                        position_difference = "+"+position_difference;
                        }
                        pos_indicator = "green";
                    }

                    if(interval == "-00.000"){
                        interval = "Winner";
                    }

                    str = car;
                    if (str.toLowerCase().indexOf("mercedes") >= 0){
                        carlogo = "merc";
                        car_count_merc++;

                    }else if(str.toLowerCase().indexOf("audi") >= 0){
                        carlogo = "audi";
                        car_count_audi++;

                    }else if(str.toLowerCase().indexOf("bmw") >= 0){
                        carlogo = "bmw";
                        car_count_bmw++;
                    }
                    else if(str.toLowerCase().indexOf("ferrari") >= 0){
                        carlogo = "ferrari";
                        car_count_ferrari++;
                    }


                    $('.ticker').append('<li><div class="sb '+ pos_indicator +'"></div><div class="competitor"><div class="name"><span>'+ name +'</span></div><div class="car"><span><div class="'+ carlogo +'"></div>'+ car +'</span></div><div class="finpos"><span>'+ finpos +'</span></div><div class="startpos"><span>Started: '+ startpos +'</span></div><div class="car"><span></span></div><div class="carclass"><span>'+ carclass +'</span></div><div class="irating"><span>iR: '+ irating +'</span></div><div class="interval"><span>'+ interval +'</span></div><div class="pos-diff"><span>'+ position_difference +'</span></div></div></li>');


                    laps.push({'Name': name, 'Lap Time': fastest_lap});

                    


                    });

                     $('.cars-list').append('<div class="row"><div class="carblock">Mercedes<br /><span> '+ car_count_merc +'</span></div><div class="carblock">BMW<br /><span>'+ car_count_bmw +'</span></div><div class="carblock">Audi<br /><span>'+ car_count_audi +'</span></div><div class="carblock">Ferrari<br /><span>'+ car_count_ferrari +'</span></div></div>');
                    
                    loadTicker();
                    j = -1;
                    $.each(laps, function (index, value) {
                        j++;
                        console.log(laps);
                        var name = laps[j]["Name"];
                        var time = laps[j]["Lap Time"];
                        var row = "<tr><td>"+ name +"</td><td>"+ time +"</td></tr>";
                        $('table.laps').append(row);
                    });
                    

                }    


             });
                




             console.log(cars_array);
            
        });
  
    </script>
</body>

</html>